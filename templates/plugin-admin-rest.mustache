<?php

namespace {{plugin_namespace}}\{{plugin_class}}\Admin;

/**
 * The REST API functionality of the plugin.
 *
 *
 * @since      0.0.1
 *
 * @package    {{plugin_namespace}}\{{plugin_class}}\Admin
 */
class {{plugin_class}}_Rest
{
	/**
	 * The Name of this plugin.
	 *
	 * @since    0.0.1
	 * @access   private
	 * @var string the Name of this plugin
	 */
	private $plugin_name;

	/**
	 * The version of this plugin.
	 *
	 * @since    0.0.1
	 * @access   private
	 * @var string the current version of this plugin
	 */
	private $version;

	/**
	 * Initialize the class and set its properties.
	 *
	 * @since    0.0.1
	 * 
	 * @param string $plugin_name the name of this plugin.
	 * @param string $version the version of this plugin.
	 *
	 * @return void
	 */
	public function __construct($plugin_name, $version)
	{
		$this->plugin_name         = $plugin_name;
		$this->version             = $version;
	}

	/**
	 * Restapi loader
	 * 
	 * @since     0.0.1
	 * 
	 * @return void
	 */
	public function restapi_init()
	{
		// START ECHO
		register_rest_route(
			'{{plugin_class_lower}/v1',
			'/echo',
			array(
				'methods'             => 'POST',
				'callback'            => array($this, 'echo'),
				'permission_callback' => function () {
					return '';
				},
			)
		);
		// END ECHO
	}

	/**
	 * Register ECHO rest function.
	 * 
	 * @since  0.0.1
	 * 
	 * @param  WP_REST_Request $request the HTTP Request.
	 * @return void
	 */
	public function echo($request)
	{
		echo $_REQUEST['message'];
	}
}
